"use strict";(self.webpackChunkchat_app=self.webpackChunkchat_app||[]).push([[218],{218:function(e,r,n){n.r(r),n.d(r,{default:function(){return J}});var s=n(885),a=n(2791),i=n(8956),c=n(5157),t=n(4760),d=n(9434),u=n(184);function o(e){var r=e.setOpened,n=(0,d.I0)(),s=(0,d.v9)((function(e){return e.darkMode}));return(0,u.jsxs)("header",{className:"header"+(s?" elements-dark":""),style:{borderBottom:"1px solid #cccccc"},children:[(0,u.jsxs)("div",{className:"header__logo-burger",children:[(0,u.jsxs)("div",{className:"logo",children:[(0,u.jsx)(i.swP,{color:s?"white":"blue",className:"logo__img",size:30}),(0,u.jsx)("div",{className:"logo__text",children:"Chat-App"})]}),(0,u.jsx)(c.O,{className:"burger",color:s?"white":"",onClick:function(){r((function(e){return!e}))}})]}),(0,u.jsx)("div",{className:"header__dark-switcher",children:(0,u.jsx)(i.PUA,{color:s?"white":"blue",size:40,onClick:function(){n((0,t.yX)())}})})]})}var l=n(1326),v=n(6910),h=n(6871),x=n(5587),f=n(3824),m=n(5986),j=n(2148),p=function(){(0,j.w7)(l.I).then((function(){console.log("success")})).catch((function(e){console.error("error",e)}))};function N(){var e=(0,a.useState)(!1),r=(0,s.Z)(e,2),n=r[0],c=r[1];return(0,u.jsxs)(f.J,{opened:n,onChange:c,children:[(0,u.jsx)(f.J.Target,{children:(0,u.jsx)("div",{children:(0,u.jsx)(i.rt9,{className:"arrow-logout",onClick:function(){return c((function(e){return!e}))}})})}),(0,u.jsx)(f.J.Dropdown,{children:(0,u.jsx)(m.z,{color:"red",onClick:p,children:"Log Out"})})]})}function _(e){var r=e.user;return(0,u.jsx)("div",{className:"navbar-user",children:(0,u.jsxs)("div",{className:"user",children:[(0,u.jsx)(x.q,{className:"navbar-user__avatar item",src:r&&r.photoURL}),(0,u.jsxs)("div",{className:"navbar-user__info info-user item",children:[(0,u.jsx)("div",{className:"info-user__name",children:r&&r.displayName}),(0,u.jsx)("div",{className:"info-user__email",children:r&&r.email})]}),(0,u.jsx)(N,{})]})})}var g=n(4165),b=n(5861),k=n(1413),w=n(9062);function C(e){var r=e.setOpened,n=(0,a.useState)([]),i=(0,s.Z)(n,2),c=i[0],o=i[1],v=(0,d.I0)();(0,a.useEffect)((function(){var e=(0,w.IO)((0,w.hJ)(l.db,"users"),(0,w.Xo)("timeStamp")),r=(0,w.cf)(e,(function(e){var r=[];e.forEach((function(e){r.push((0,k.Z)((0,k.Z)({},e.data()),{},{id:e.id}))})),o(r)}));return function(){return r()}}),[]);var h=function(){var e=(0,b.Z)((0,g.Z)().mark((function e(r){var n,s,a,i;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(null===(n=l.I.currentUser)||void 0===n?void 0:n.uid)>r.uid?(null===(s=l.I.currentUser)||void 0===s?void 0:s.uid)+r.uid:r.uid+(null===(a=l.I.currentUser)||void 0===a?void 0:a.uid),e.next=3,(0,w.QT)((0,w.JU)(l.db,"chats",i));case 3:if(e.sent.exists()){e.next=7;break}return e.next=7,(0,w.pl)((0,w.JU)(l.db,"chats",i),{messages:[]});case 7:v((0,t.Lq)({uid:i}));case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,u.jsx)("div",{className:"registered-users",children:c.map((function(e){var n;return e.uid!==(null===(n=l.I.currentUser)||void 0===n?void 0:n.uid)?(0,u.jsxs)("div",{className:"registered-user",onClick:function(){h(e),r(!1)},children:[(0,u.jsx)(x.q,{src:null===e||void 0===e?void 0:e.icon,alt:"avatar"}),(0,u.jsxs)("div",{className:"registered-user__info",children:[(0,u.jsx)("div",{className:"registered-user__name",children:e.displayName}),(0,u.jsx)("div",{className:"registered-user__email",children:e.email})]})]},e.id):(0,u.jsx)("div",{},e.id)}))})}function I(e){var r=e.opened,n=e.setOpened,a=(0,v.F_)(l.I),i=(0,s.Z)(a,1)[0],c=(0,d.v9)((function(e){return e.darkMode}));return(0,u.jsxs)("div",{className:"navbar"+(r?" navbar-open":"")+(c?" elements-dark":""),children:[(0,u.jsxs)("div",{className:"nav-content",children:[(0,u.jsx)(C,{setOpened:n}),(0,u.jsx)(_,{user:i})]}),!i&&(0,u.jsx)(h.Fg,{replace:!0,to:"/"})]})}function O(){return(0,u.jsx)("div",{className:"not-selected-chat",children:"Choose an chat"})}var U=(0,a.lazy)((function(){return n.e(347).then(n.bind(n,9347))})),Z=(0,a.lazy)((function(){return Promise.all([n.e(54),n.e(747)]).then(n.bind(n,2747))}));function y(){var e=(0,a.useRef)(null),r=(0,d.v9)((function(e){return e.currentClickedUser})),n=(0,d.v9)((function(e){return e.darkMode}));return(0,u.jsx)("main",{className:n?" board-dark":"",children:""!==r?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(U,{chatScroll:e}),(0,u.jsx)(Z,{chatScroll:e})," "]}):(0,u.jsx)(O,{})})}function J(){var e=(0,a.useState)(!1),r=(0,s.Z)(e,2),n=r[0],i=r[1];return(0,u.jsxs)("div",{className:"chat",children:[(0,u.jsx)(o,{setOpened:i}),(0,u.jsx)(I,{opened:n,setOpened:i}),(0,u.jsx)(y,{})]})}}}]);
//# sourceMappingURL=218.fa8e8c64.chunk.js.map