"use strict";(self.webpackChunkchat_app=self.webpackChunkchat_app||[]).push([[826],{6826:function(e,r,s){s.r(r),s.d(r,{default:function(){return I}});var n=s(2791),a=s(8956),t=s(4760),i=s(9434),c=s(184);function o(){var e=(0,i.I0)(),r=(0,i.v9)((function(e){return e.darkMode})),s=(0,i.v9)((function(e){return e.opened}));return(0,c.jsxs)("header",{className:"header"+(r?" elements-dark":""),style:{borderBottom:"1px solid #cccccc"},children:[(0,c.jsxs)("div",{className:"header__logo-burger",children:[(0,c.jsxs)("div",{className:"logo",children:[(0,c.jsx)(a.swP,{color:r?"white":"#0f54ae",className:"logo__img",size:30}),(0,c.jsx)("div",{className:"logo__text",children:"Chat-App"})]}),(0,c.jsx)("div",{className:"burger"+(s?" active-burger":"")+(r?" dark-mode__burger":""),onClick:function(){e((0,t.J)())}})]}),(0,c.jsx)("div",{className:"header__dark-switcher",children:(0,c.jsx)(a.PUA,{color:r?"white":"#0f54ae",size:40,onClick:function(){e((0,t.yX)())}})})]})}var u=s(885),l=s(1326),d=s(6871),v=s(2148),m=function(){(0,v.w7)(l.I).then((function(){console.log("success")})).catch((function(e){console.error("error",e)}))};function f(){var e=(0,n.useState)(!1),r=(0,u.Z)(e,2),s=r[0],t=r[1];return(0,c.jsxs)("div",{className:"popover",children:[(0,c.jsx)("div",{className:"popover__target",children:(0,c.jsx)(a.rt9,{className:"arrow-logout",onClick:function(){return t((function(e){return!e}))}})}),(0,c.jsx)("div",{className:"popover__dropdown"+(s?" active-dropdown":""),children:(0,c.jsx)("button",{className:"btn",onClick:m,children:"Log Out"})})]})}var h=s(6910);function x(){var e=(0,h.F_)(l.I),r=(0,u.Z)(e,1)[0];return(0,c.jsx)("div",{className:"navbar-user",children:(0,c.jsxs)("div",{className:"user",children:[(0,c.jsx)("img",{className:"navbar-user__avatar avatar item",src:r&&r.photoURL,alt:"avatar",referrerPolicy:"no-referrer"}),(0,c.jsxs)("div",{className:"navbar-user__info info-user item",children:[(0,c.jsx)("div",{className:"info-user__name",children:r&&r.displayName}),(0,c.jsx)("div",{className:"info-user__email",children:r&&r.email})]}),(0,c.jsx)(f,{})]})})}var j=s(4165),p=s(5861),g=s(1413),N=s(9062);function _(){var e=(0,n.useState)([]),r=(0,u.Z)(e,2),s=r[0],a=r[1],o=(0,i.I0)();(0,n.useEffect)((function(){var e=(0,N.IO)((0,N.hJ)(l.db,"users"),(0,N.Xo)("timeStamp")),r=(0,N.cf)(e,(function(e){var r=[];e.forEach((function(e){r.push((0,g.Z)((0,g.Z)({},e.data()),{},{id:e.id}))})),a(r)}));return function(){return r()}}),[]);var d=function(){var e=(0,p.Z)((0,j.Z)().mark((function e(r){var s,n,a,i;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(null===(s=l.I.currentUser)||void 0===s?void 0:s.uid)>r.uid?(null===(n=l.I.currentUser)||void 0===n?void 0:n.uid)+r.uid:r.uid+(null===(a=l.I.currentUser)||void 0===a?void 0:a.uid),o((0,t.Lq)({uid:i})),e.next=4,(0,N.QT)((0,N.JU)(l.db,"chats",i));case 4:if(e.sent.exists()){e.next=8;break}return e.next=8,(0,N.pl)((0,N.JU)(l.db,"chats",i),{messages:[]});case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,c.jsx)("div",{className:"registered-users",children:s.map((function(e){var r;return e.uid!==(null===(r=l.I.currentUser)||void 0===r?void 0:r.uid)?(0,c.jsxs)("div",{className:"registered-user",onClick:function(){d(e),o((0,t.J)())},children:[(0,c.jsx)("img",{className:"avatar",src:null===e||void 0===e?void 0:e.icon,alt:"avatar",referrerPolicy:"no-referrer"}),(0,c.jsxs)("div",{className:"registered-user__info",children:[(0,c.jsx)("div",{className:"registered-user__name",children:e.displayName}),(0,c.jsx)("div",{className:"registered-user__email",children:e.email})]})]},e.id):(0,c.jsx)("div",{},e.id)}))})}function k(){var e=(0,h.F_)(l.I),r=(0,u.Z)(e,1)[0],s=(0,i.v9)((function(e){return e.darkMode})),n=(0,i.v9)((function(e){return e.opened}));return(0,c.jsxs)("div",{className:"navbar"+(n?" navbar-open":"")+(s?" elements-dark":""),children:[(0,c.jsxs)("div",{className:"nav-content",children:[(0,c.jsx)(_,{}),(0,c.jsx)(x,{})]}),!r&&(0,c.jsx)(d.Fg,{replace:!0,to:"/"})]})}function b(){return(0,c.jsx)("div",{className:"not-selected-chat",children:"Choose an chat"})}function Z(e){var r=e.message,s=l.I.currentUser.uid;return(0,c.jsxs)("div",{className:"board-item"+(s===r.uid?" send-message":" recieved-message"),children:[(0,c.jsx)("img",{className:"avatar item",src:r.icon,alt:"avatar",referrerPolicy:"no-referrer"}),(0,c.jsxs)("div",{className:"board-message__text item",children:[(0,c.jsx)("p",{className:"item__name",children:r.dispalyName}),(0,c.jsx)("p",{className:"item__text",children:r.message})]})]})}function w(e){var r,s=e.chatScroll,a=(0,n.useState)([]),t=(0,u.Z)(a,2),o=t[0],d=t[1],v=(0,i.v9)((function(e){return e.currentClickedUser}));return(0,n.useEffect)((function(){if(""!==v){var e=(0,N.cf)((0,N.JU)(l.db,"chats",v),(0,N.Xo)("timeStamp"),(function(e){e.exists()&&d(e.data())}));return function(){return e()}}}),[v]),(0,n.useEffect)((function(){s.current.scrollTop=s.current.scrollHeight}),[o,s]),(0,c.jsx)("div",{className:"board",ref:s,children:(null===(r=o.messages)||void 0===r?void 0:r.length)>0?null===o||void 0===o?void 0:o.messages.map((function(e){return(0,c.jsx)(Z,{message:e},e.id)})):(0,c.jsx)("div",{className:"no-messages-yet",children:"No Messages Yet"})})}var C=s(4122),S=s(4261);function U(e){var r=e.chatScroll,s=(0,n.useState)(""),t=(0,u.Z)(s,2),o=t[0],d=t[1],v=(0,n.useState)(!1),m=(0,u.Z)(v,2),f=m[0],h=m[1],x=(0,n.useState)(null),_=(0,u.Z)(x,2),k=_[0],b=_[1],Z=l.I.currentUser,w=(0,i.v9)((function(e){return e.currentClickedUser})),U=(0,i.v9)((function(e){return e.darkMode}));(0,n.useEffect)((function(){fetch("https://cdn.jsdelivr.net/npm/@emoji-mart/data").then((function(e){b(e.json())}))}));var y=function(){var e=(0,p.Z)((0,j.Z)().mark((function e(){var s;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===o||""===w){e.next=7;break}return s=new Date,d(""),h(!1),e.next=6,(0,N.r7)((0,N.JU)(l.db,"chats",w),{messages:(0,N.vr)({id:(0,S.Z)(),message:o,dispalyName:null===Z||void 0===Z?void 0:Z.displayName,icon:null===Z||void 0===Z?void 0:Z.photoURL,uid:null===Z||void 0===Z?void 0:Z.uid,timeStamp:s})});case 6:r.current.scrollTop=r.current.scrollHeight;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,c.jsxs)("div",{className:"messages",children:[(0,c.jsx)("textarea",{className:"messages__input"+(U?" elements-dark":""),placeholder:"Message here...",style:(0,g.Z)({},U?{backgroundColor:"#212121 !important"}:{}),value:o,onChange:function(e){var r=e.target.value;d(r)},minrows:1.3,maxrows:10,maxLength:800}),(0,c.jsx)(a.hRw,{onClick:function(){h((function(e){return!e}))},className:"emojie-picker",size:30}),(0,c.jsx)("div",{className:"emojie"+(f?"":" hidden"),children:(0,c.jsx)(C.Z,{data:k,categories:["people"],theme:"light",onEmojiSelect:function(e){var r=e.unified.split("-"),s=[];r.forEach((function(e){return s.push("0x"+e)}));var n=String.fromCodePoint.apply(String,s);d(o+n)}})}),(0,c.jsx)("button",{className:"form-button",onClick:y,children:"Send"})]})}function y(){var e=(0,n.useRef)(null),r=(0,i.v9)((function(e){return e.currentClickedUser})),s=(0,i.v9)((function(e){return e.darkMode}));return(0,c.jsx)("main",{className:s?" board-dark":"",children:""!==r?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(w,{chatScroll:e}),(0,c.jsx)(U,{chatScroll:e})," "]}):(0,c.jsx)(b,{})})}function I(){return(0,c.jsxs)("div",{className:"chat",children:[(0,c.jsx)(o,{}),(0,c.jsx)(k,{}),(0,c.jsx)(y,{})]})}}}]);
//# sourceMappingURL=826.2f6ac5d7.chunk.js.map