"use strict";(self.webpackChunkchat_app=self.webpackChunkchat_app||[]).push([[826],{6826:function(e,s,r){r.r(s),r.d(s,{default:function(){return M}});var n=r(885),t=r(2791),a=r(8956),i=r(5157),c=r(4760),o=r(9434),u=r(184);function d(e){var s=e.setOpened,r=(0,o.I0)(),n=(0,o.v9)((function(e){return e.darkMode}));return(0,u.jsxs)("header",{className:"header"+(n?" elements-dark":""),style:{borderBottom:"1px solid #cccccc"},children:[(0,u.jsxs)("div",{className:"header__logo-burger",children:[(0,u.jsxs)("div",{className:"logo",children:[(0,u.jsx)(a.swP,{color:n?"white":"blue",className:"logo__img",size:30}),(0,u.jsx)("div",{className:"logo__text",children:"Chat-App"})]}),(0,u.jsx)(i.O,{className:"burger",color:n?"white":"",onClick:function(){s((function(e){return!e}))}})]}),(0,u.jsx)("div",{className:"header__dark-switcher",children:(0,u.jsx)(a.PUA,{color:n?"white":"blue",size:40,onClick:function(){r((0,c.yX)())}})})]})}var l=r(1326),m=r(6910),h=r(6871),v=r(5587),f=r(3824),x=r(5986),j=r(2148),p=function(){(0,j.w7)(l.I).then((function(){console.log("success")})).catch((function(e){console.error("error",e)}))};function g(){var e=(0,t.useState)(!1),s=(0,n.Z)(e,2),r=s[0],i=s[1];return(0,u.jsxs)(f.J,{opened:r,onChange:i,children:[(0,u.jsx)(f.J.Target,{children:(0,u.jsx)("div",{children:(0,u.jsx)(a.rt9,{className:"arrow-logout",onClick:function(){return i((function(e){return!e}))}})})}),(0,u.jsx)(f.J.Dropdown,{children:(0,u.jsx)(x.z,{color:"red",onClick:p,children:"Log Out"})})]})}function N(e){var s=e.user;return(0,u.jsx)("div",{className:"navbar-user",children:(0,u.jsxs)("div",{className:"user",children:[(0,u.jsx)(v.q,{className:"navbar-user__avatar item",src:s&&s.photoURL}),(0,u.jsxs)("div",{className:"navbar-user__info info-user item",children:[(0,u.jsx)("div",{className:"info-user__name",children:s&&s.displayName}),(0,u.jsx)("div",{className:"info-user__email",children:s&&s.email})]}),(0,u.jsx)(g,{})]})})}var _=r(4165),k=r(5861),b=r(1413),Z=r(9062);function w(e){var s=e.setOpened,r=(0,t.useState)([]),a=(0,n.Z)(r,2),i=a[0],d=a[1],m=(0,o.I0)();(0,t.useEffect)((function(){var e=(0,Z.IO)((0,Z.hJ)(l.db,"users"),(0,Z.Xo)("timeStamp")),s=(0,Z.cf)(e,(function(e){var s=[];e.forEach((function(e){s.push((0,b.Z)((0,b.Z)({},e.data()),{},{id:e.id}))})),d(s)}));return function(){return s()}}),[]);var h=function(){var e=(0,k.Z)((0,_.Z)().mark((function e(s){var r,n,t,a;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(null===(r=l.I.currentUser)||void 0===r?void 0:r.uid)>s.uid?(null===(n=l.I.currentUser)||void 0===n?void 0:n.uid)+s.uid:s.uid+(null===(t=l.I.currentUser)||void 0===t?void 0:t.uid),e.next=3,(0,Z.QT)((0,Z.JU)(l.db,"chats",a));case 3:if(e.sent.exists()){e.next=7;break}return e.next=7,(0,Z.pl)((0,Z.JU)(l.db,"chats",a),{messages:[]});case 7:m((0,c.Lq)({uid:a}));case 8:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}();return(0,u.jsx)("div",{className:"registered-users",children:i.map((function(e){var r;return e.uid!==(null===(r=l.I.currentUser)||void 0===r?void 0:r.uid)?(0,u.jsxs)("div",{className:"registered-user",onClick:function(){h(e),s(!1)},children:[(0,u.jsx)(v.q,{src:null===e||void 0===e?void 0:e.icon,alt:"avatar"}),(0,u.jsxs)("div",{className:"registered-user__info",children:[(0,u.jsx)("div",{className:"registered-user__name",children:e.displayName}),(0,u.jsx)("div",{className:"registered-user__email",children:e.email})]})]},e.id):(0,u.jsx)("div",{},e.id)}))})}function C(e){var s=e.opened,r=e.setOpened,t=(0,m.F_)(l.I),a=(0,n.Z)(t,1)[0],i=(0,o.v9)((function(e){return e.darkMode}));return(0,u.jsxs)("div",{className:"navbar"+(s?" navbar-open":"")+(i?" elements-dark":""),children:[(0,u.jsxs)("div",{className:"nav-content",children:[(0,u.jsx)(w,{setOpened:r}),(0,u.jsx)(N,{user:a})]}),!a&&(0,u.jsx)(h.Fg,{replace:!0,to:"/"})]})}function S(){return(0,u.jsx)("div",{className:"not-selected-chat",children:"Choose an chat"})}function U(e){var s=e.message,r=l.I.currentUser.uid;return(0,u.jsxs)("div",{className:"board-item"+(r===s.uid?" send-message":" recieved-message"),children:[(0,u.jsx)(v.q,{src:s.icon,className:"item"}),(0,u.jsxs)("div",{className:"board-message__text item",children:[(0,u.jsx)("p",{className:"item__name",children:s.dispalyName}),(0,u.jsx)("p",{className:"item__text",children:s.message})]})]})}function y(e){var s,r=e.chatScroll,a=(0,t.useState)([]),i=(0,n.Z)(a,2),c=i[0],d=i[1],m=(0,o.v9)((function(e){return e.currentClickedUser}));return(0,t.useEffect)((function(){if(""!==m){var e=(0,Z.cf)((0,Z.JU)(l.db,"chats",m),(0,Z.Xo)("timeStamp"),(function(e){e.exists()&&d(e.data())}));return function(){return e()}}}),[m]),(0,t.useEffect)((function(){r.current.scrollTop=r.current.scrollHeight}),[c,r]),(0,u.jsx)("div",{className:"board",ref:r,children:(null===(s=c.messages)||void 0===s?void 0:s.length)>0?null===c||void 0===c?void 0:c.messages.map((function(e){return(0,u.jsx)(U,{message:e},e.id)})):(0,u.jsx)("div",{className:"no-messages-yet",children:"No Messages Yet"})})}var I=r(4122),O=r(4261);function J(e){var s=e.chatScroll,r=(0,t.useState)(""),i=(0,n.Z)(r,2),c=i[0],d=i[1],h=(0,t.useState)(!1),v=(0,n.Z)(h,2),f=v[0],x=v[1],j=(0,t.useState)(null),p=(0,n.Z)(j,2),g=p[0],N=p[1],w=(0,m.F_)(l.I),C=(0,n.Z)(w,1)[0],S=(0,o.v9)((function(e){return e.currentClickedUser})),U=(0,o.v9)((function(e){return e.darkMode}));(0,t.useEffect)((function(){fetch("https://cdn.jsdelivr.net/npm/@emoji-mart/data").then((function(e){N(e.json())}))}));var y=function(){var e=(0,k.Z)((0,_.Z)().mark((function e(){var r;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===c||""===S){e.next=7;break}return r=new Date,d(""),x(!1),e.next=6,(0,Z.r7)((0,Z.JU)(l.db,"chats",S),{messages:(0,Z.vr)({id:(0,O.Z)(),message:c,dispalyName:C.displayName,icon:C.photoURL,uid:C.uid,timeStamp:r})});case 6:s.current.scrollTop=s.current.scrollHeight;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,u.jsxs)("div",{className:"messages",children:[(0,u.jsx)("textarea",{className:"messages__input"+(U?" elements-dark":""),placeholder:"Message here...",style:(0,b.Z)({},U?{backgroundColor:"#212121 !important"}:{}),value:c,onChange:function(e){var s=e.target.value;d(s)},minrows:1.3,maxrows:10,maxLength:800}),(0,u.jsx)(a.hRw,{onClick:function(){x((function(e){return!e}))},className:"emojie-picker",size:30}),(0,u.jsx)("div",{className:"emojie"+(f?"":" hidden"),children:(0,u.jsx)(I.Z,{data:g,categories:["people"],theme:"light",onEmojiSelect:function(e){var s=e.unified.split("-"),r=[];s.forEach((function(e){return r.push("0x"+e)}));var n=String.fromCodePoint.apply(String,r);d(c+n)}})}),(0,u.jsx)("button",{className:"form-button",onClick:y,children:"Send"})]})}function E(){var e=(0,t.useRef)(null),s=(0,o.v9)((function(e){return e.currentClickedUser})),r=(0,o.v9)((function(e){return e.darkMode}));return(0,u.jsx)("main",{className:r?" board-dark":"",children:""!==s?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(y,{chatScroll:e}),(0,u.jsx)(J,{chatScroll:e})," "]}):(0,u.jsx)(S,{})})}function M(){var e=(0,t.useState)(!1),s=(0,n.Z)(e,2),r=s[0],a=s[1];return(0,u.jsxs)("div",{className:"chat",children:[(0,u.jsx)(d,{setOpened:a}),(0,u.jsx)(C,{opened:r,setOpened:a}),(0,u.jsx)(E,{})]})}}}]);
//# sourceMappingURL=826.a0b96241.chunk.js.map